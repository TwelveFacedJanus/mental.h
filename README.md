# Mental Engine

3D графический движок с поддержкой скайбокса, написанный на C с использованием OpenGL.

## Возможности

- ✅ 3D рендеринг с OpenGL
- ✅ Система компонентов (прямоугольники, треугольники, кубы)
- ✅ Камера с управлением мышью и клавиатурой
- ✅ **Скайбокс с поддержкой пользовательских текстур**
- ✅ Шейдерная система
- ✅ Кроссплатформенность (macOS, Linux, Windows)

## Скайбокс

### Что это такое?

Скайбокс - это технология рендеринга, которая создает иллюзию бесконечного неба или окружения вокруг 3D сцены. В Mental Engine скайбокс реализован как куб с текстурами на каждой грани.

### Особенности реализации

- **Автоматическая генерация текстур** - создание красивого неба с облаками
- **Поддержка пользовательских изображений** - загрузка собственных текстур
- **Оптимизированный рендеринг** - минимальное влияние на производительность
- **Правильная интеграция с камерой** - скайбокс следует за поворотами камеры

### Быстрый старт

1. **Создание текстур по умолчанию:**
   ```bash
   ./create_textures
   ```

2. **Компиляция и запуск:**
   ```bash
   make
   ./Binary/mentalGraphics
   ```

3. **Управление:**
   - `WASD` - перемещение камеры
   - `Мышь` - поворот камеры
   - `Колесо мыши` - зум
   - `ESC` - выход

### Использование собственных текстур

1. Подготовьте 6 изображений для каждой грани куба
2. Разместите их в папке `textures/skybox/` с именами:
   - `right.ppm` - правая грань
   - `left.ppm` - левая грань
   - `top.ppm` - верхняя грань
   - `bottom.ppm` - нижняя грань
   - `front.ppm` - передняя грань
   - `back.ppm` - задняя грань

3. Перезапустите программу

## Структура проекта

```
mental.h/
├── engine/
│   ├── component.c/h     # Система компонентов
│   ├── engine.c/h        # Основной движок
│   ├── skybox.c          # Реализация скайбокса
│   ├── wm.c/h            # Управление окном
│   └── ...
├── textures/skybox/      # Текстуры скайбокса
├── Binary/               # Скомпилированные файлы
├── create_textures.c     # Генератор текстур
├── convert_to_ppm.py     # Конвертер изображений
├── SKYBOX_README.md      # Документация по скайбоксу
└── Makefile
```

## Компиляция

### Требования

- C компилятор (GCC/Clang)
- OpenGL
- GLFW
- GLEW
- cglm (математическая библиотека)

### macOS

```bash
# Установка зависимостей
brew install glfw glew cglm

# Компиляция
make
```

### Linux

```bash
# Установка зависимостей
sudo apt-get install libglfw3-dev libglew-dev libcglm-dev

# Компиляция
make
```

## API

### Основные функции скайбокса

```c
// Создание и инициализация
MentalResult mentalCreateSkybox(MentalSkybox* pSkybox);
MentalResult mentalLoadSkyboxTextures(MentalSkybox* pSkybox, ...);
MentalResult mentalAttachSkyboxShader(MentalSkybox* pSkybox, ...);

// Рендеринг
MentalResult mentalDrawSkybox(MentalSkybox* pSkybox, MentalWindowManager *pManager);

// Очистка
MentalResult mentalDestroySkybox(MentalSkybox *pSkybox);
```

### Интеграция в проект

Скайбокс автоматически интегрирован в `MentalWindowManager`:

```c
typedef struct MentalWindowManager {
    MentalStructureType eType;
    MentalWindowManagerInfo *pInfo;
    void *pNext;
    MentalCamera camera;
    MentalSkybox skybox;  // ← Скайбокс
} MentalWindowManager;
```

## Примеры

### Создание собственного скайбокса

```c
// В функции main или инициализации
MentalWindowManager wm;
// ... инициализация wm ...

// Скайбокс автоматически создается в mentalCreateWM()
mentalCreateWM(&wm);

// Загрузка собственных текстур
mentalLoadSkyboxTextures(&wm.skybox, 
    "my_skybox/right.jpg", "my_skybox/left.jpg",
    "my_skybox/top.jpg", "my_skybox/bottom.jpg",
    "my_skybox/front.jpg", "my_skybox/back.jpg");

// Скайбокс автоматически отрисовывается в mentalRunWM()
mentalRunWM(&wm);
```

## Производительность

- Скайбокс отрисовывается как единый куб
- Использует оптимизированные шейдеры
- Автоматически настраивает тест глубины
- Минимальное влияние на FPS

## Устранение неполадок

### Проблемы с компиляцией
- Убедитесь, что все зависимости установлены
- Проверьте версии библиотек
- Смотрите логи компиляции

### Проблемы с рендерингом
- Проверьте поддержку OpenGL 3.3+
- Убедитесь, что драйверы обновлены
- Проверьте логи на наличие ошибок

### Проблемы с текстурами
- Проверьте формат файлов (PPM)
- Убедитесь, что все 6 текстур загружены
- Проверьте размеры текстур (рекомендуется 512x512)

## Лицензия

MIT License

## Вклад в проект

1. Форкните репозиторий
2. Создайте ветку для новой функции
3. Внесите изменения
4. Создайте Pull Request

## Поддержка

Если у вас есть вопросы или проблемы:
1. Проверьте документацию в `SKYBOX_README.md`
2. Создайте Issue в репозитории
3. Опишите проблему подробно с логами
